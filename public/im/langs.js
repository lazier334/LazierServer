var TextMap = initTextMap((new URLSearchParams(location.search)).get('lang'));
TextMap.__notFound = {};

function initTextMap(lang) {
    const moreLang = {
        "en": {
            'äººæ•°ä¸è¶³ä»¥åˆ›å»ºè¯é¢˜ï¼Œè¯·é€‰æ‹©è‡³å°‘ä¸€ä¸ªå…¶ä»–ç”¨æˆ·': 'The number of people is not enough to create a topic, please select at least one other user',
            'è¯·é€‰æ‹©è‡³å°‘1ä¸ªå…¶ä»–ç”¨æˆ·': 'Please select at least 1 other user',
            'ä»¥ä¸Šæ˜¯å³å°†åˆ é™¤çš„å†…å®¹': 'next delete i18n up data',
            'æœç´¢...': 'Search...',
            'æ¬¢è¿ä½¿ç”¨è¯¥é¡¹ç›®ï¼': 'Welcome use the project!',
            'å¤åˆ¶': 'copy',
            'ç”¨æˆ·å': 'username',
            'å¯†ç ': 'password',
            'ç±»å‹': 'type',
            'æ¶ˆæ¯æ—¶é—´': 'message time',
            'æ›´æ–°æ—¶é—´': 'update time',
            'è¾“å…¥æ¶ˆæ¯...': 'Input message ...',
            'å‘é€': 'Send',
            'ä¸ªäººä¿¡æ¯': 'My Profile',
            'ç”¨æˆ·ä¿¡æ¯': 'User Profile',
            'ç®¡ç†ç”¨æˆ·ä¿¡æ¯': 'Manage User Profile',
            'ç”¨æˆ·ID': 'User ID',
            'ç”¨æˆ·å¤´åƒåœ°å€': 'User avatar url',
            'ç”¨æˆ·å': 'Username',
            'ç”¨æˆ·çŠ¶æ€': 'User status',
            'æœ€åæ›´æ–°æ—¶é—´': 'Last update time',
            'æ˜¯å¦ç®¡ç†å‘˜': 'Is admin',
            'è¶…çº§ç®¡ç†å‘˜': 'Super admin',
            'è¿‡æœŸæ—¶é—´': 'Expired time',
            'ç”¨æˆ·': 'User',
            'ç™»å½•': 'Login',
            'è¯·è¾“å…¥ä½ çš„ç”¨æˆ·å': 'Enter your username',
            'è¯·è¾“å…¥ä½ çš„å¯†ç ': 'Enter your password',
            'è¯·å†æ¬¡è¾“å…¥å¯†ç ': 'Enter your password again',
            'æ³¨å†Œ': 'Register',
            'é€€å‡ºç™»å½•': 'Loginout',
            'ä½ ç¡®å®šè¦åˆ›å»ºä¸€ä¸ªè¯é¢˜å—ï¼Ÿ': 'Are you sure you want to create a topic?',
            'åˆ›å»º{num}å…¶ä»–äººçš„è¯é¢˜': 'Create a topic with {num} other users',
            'ç¡®å®š': 'Confirm',
            'å–æ¶ˆ': 'Cancel',
            'è¯·è¾“å…¥è¯é¢˜åç§°': 'Enter topic name',
            'è¯é¢˜åç§°ä¸ºç©º': 'Topic name cannot be empty',
            'æ— æ•ˆçš„è¾“å…¥': 'Invalid input',
            'ç‰ˆæœ¬': 'version',
            'è¯é¢˜åˆ—è¡¨': 'Topic List',
            'ç”¨æˆ·åˆ—è¡¨': 'User List',
            'åˆ é™¤': 'delete',
            'ç¼–è¾‘': 'edit',
            'å–æ¶ˆç¼–è¾‘': 'cancel edit',
            'æ›´æ–°': 'update',
            'â†» åˆ·æ–°': 'â†» Reload',
            'âš™ è®¾ç½®': 'âš™ Settings',
            '+ è¯é¢˜': '+ Topic',
            '- è¯é¢˜': '- Topic',
            'x å–æ¶ˆ': 'x Cancel',
            'è®¾ç½®': 'Settings',
            'æ¸…ç†ç¼“å­˜': 'Clear Cache',
            'åˆ›å»ºè¯é¢˜': 'Create Topic',
            'å…³äº': 'About',
            'è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´ï¼': 'The two entered passwords are inconsistent!',
            'å·²æ³¨é”€ç™»å½•': 'Logged out',
            'ç™»å½•æˆåŠŸ!': 'Login successful!',
            'æœåŠ¡å™¨é”™è¯¯!': 'Server error!',
            'å–æ¶ˆæœªç™»å½•æ—¶çš„è¯·æ±‚': 'Cancel requests when you are not logged in',
            'æœªç™»å½•': 'Not logged in',
            'å“åº”ä¸æ˜¯okçŠ¶æ€': 'The response is not ok',
            'è¯·æ±‚å¤±è´¥!': 'Request failed!',
            'è¯·æ±‚ä¸­æ–­': 'Request interrupt',
            'ç¼“å­˜å·²æ¸…é™¤': 'Caches cleared',
            'æ¸…é™¤ç¼“å­˜å¤±è´¥': 'Failed to clear caches',
            'è¯·è¾“å…¥æ—§å¯†ç ï¼': 'Please enter old password!',
            'ä¿®æ”¹èµ„æ–™': 'Update Profile',
            'ä¿®æ”¹å¯†ç ': 'Update Password',
            'æ— æ•ˆçš„å¤´åƒåœ°å€': 'Invalid avatar url',
            'è¯·é€‰æ‹©è‡³å°‘1ä¸ªè¯é¢˜': 'Please select at least 1 topic',
            'åˆ é™¤{num}ä¸ªè¯é¢˜': 'Delete {num} topic',
            'ä½ ç¡®å®šè¦åˆ é™¤è¯é¢˜å—ï¼Ÿ': 'Are you sure you want to delete the topics?',
            'è¯é¢˜åˆ é™¤æˆåŠŸ!': ' Topic deleted successfully!',
            'è¯é¢˜åˆ›å»ºæˆåŠŸ!': ' Topic created successfully!',
            'è¯é¢˜æ›´æ–°æˆåŠŸ!': ' Topic updated successfully!',
            'åˆ é™¤è¯é¢˜': 'Delete topic',
            'åˆ›å»ºè¯é¢˜': 'Create topic',
            'æœªå‘½ä¸­çš„å›½é™…åŒ–å­—æ®µæ•°é‡': 'The number of missed internationalization fields',
            'ğŸ‘ å·¦': 'ğŸ‘ Left',
            'ğŸ‘ å³': 'ğŸ‘ Right',
            'æ¶ˆæ¯ç±»å‹': 'Message Type',
            'åŠ è§£å¯†çš„ç§˜é’¥': 'Encrypt and decrypt the secret key',
            'éœ€è¦åŠ å¯†çš„æ•°æ®': 'Data to encrypt',
            'éœ€è¦è§£å¯†çš„æ•°æ®': 'Data to decrypt',
            'åŠ å¯†': 'encrypt',
            'è§£å¯†': 'decrypt',
            'åŠ è§£å¯†æ•°æ®': 'Encrypt and decrypt data',
            'åˆ·æ–°': 'refresh',
            'ä¸Šä¼ æ–‡ä»¶': 'Upload File',
            'é€‰æ‹©æ–‡ä»¶ä¸­...': 'File selecting...',
            'è¯·å…ˆé€‰æ‹©æ–‡ä»¶': 'Please select the file first',
            'ä¸Šä¼ ': 'upload',
            'æ¸…é™¤': 'clear',
            'ä¸Šä¼ ä¸­...': 'Uploading...',
            'å·²å…¨éƒ¨ä¸Šä¼ ': 'All uploaded',
            'xxHash-WASM åˆå§‹åŒ–å®Œæˆ': 'xxHash-WASM initialization completed',
            'å“ˆå¸Œè®¡ç®—åŠŸèƒ½ä¸å¯ç”¨ï¼Œè¯·åˆ·æ–°é¡µé¢': 'The hash calculation function is unavailable. Please refresh the page',
            'xxHashåˆå§‹åŒ–å¤±è´¥': 'The initialization of xxHash failed',
            'æ— æ•ˆçš„æ¶ˆæ¯å†…å®¹': 'Invalid msg content',
            'æ­£åœ¨è®¡ç®—æ–‡ä»¶å“ˆå¸Œ...': 'The file xxhash is being calculated...',
            'å…³é—­é¢„è§ˆ': 'close preview',
            'é¢„è§ˆ': 'preview',
            'æ€»äººæ•°': 'users total',
            'åŠ è½½Pythonä»£ç è¿è¡Œç¯å¢ƒå¤±è´¥': 'Failed to load the Python code runtime environment',
            'æ­£åœ¨åŠ è½½pythonæ¨¡å—': 'The python packages is being loaded',
            'æ²¡æœ‰å¯¼åŒ…æˆ–è§£æå¤±è´¥': 'There was no packages import or parsing failure',
            'æ­£åœ¨åŠ è½½Pythonä»£ç è¿è¡Œç¯å¢ƒä¸­': 'Python code is being loaded in the runtime environment',
            'è¯·ç¨ç­‰': 'Please waiting',
            'Pythonä»£ç è¿è¡Œç¯å¢ƒåŠ è½½æˆåŠŸ': 'The Python code runtime environment was loaded successfully',
            'æ‰“æ–­ä¿¡æ¯': 'Interrupt message',
            'å…¨å±': 'Fullscreen',
            'ä¿å­˜æ•°æ®': 'Save database',
            'æ™®é€šè¾“å…¥æ¡†æ— æ³•å¼€å¯å…¨å±æ¨¡å¼': 'The normal input box cannot enable full-screen mode',
            'åˆ‡æ¢è¾“å…¥æ¡†': 'Switch input box',
            'â†“ æ³¨é”€': 'â†“ Logout',
            '@ å…¨éƒ¨ç”¨æˆ·': '@ All Users',
            '@ å…¨éƒ¨è¯é¢˜': '@ All Topics',
            'é€‰æ‹©æ—¥æœŸå’Œæ—¶é—´': 'Select date and time',
            'æ—§å¯†ç ': 'Old password',
            'æ–°å¯†ç ': 'New password',
            'å†æ¬¡è¾“å…¥æ–°å¯†ç ': 'New password again',
            'ä½ ç¡®å®šè¦æ³¨é”€è¿™äº›ç”¨æˆ·çš„ç™»å½•çŠ¶æ€å—ï¼Ÿ': 'Are you sure you want to log off the login status of these users?',
            'æ³¨é”€{num}äººçš„ç™»å½•çŠ¶æ€': 'Logout of {num} person',
            'è¯é¢˜ID': 'topicID',
            'è¯é¢˜æ ‡é¢˜': 'topic name',
            'äººå‘˜æ€»æ•°': 'user total',
            'ç®¡ç†å‘˜æ€»æ•°': 'admin total',
            'å¹¿åœºæ¨¡å¼': 'public mode',
            'ä¿®æ”¹è¯é¢˜': 'update topic',
            'åˆ é™¤è¯é¢˜': 'delete topic',
            'é€€å‡ºè¯é¢˜': 'exit topic',
            'ç”¨æˆ·æ‹‰äººåŠ å…¥': 'Users are inviting user to join',
            'æ— æ³•åˆ é™¤ä»–äººçš„è¯é¢˜': "It's impossible to delete others' topic",
            'ä½ ç¡®å®šè¦åˆ é™¤è¯é¢˜ {name} å—ï¼Ÿ': 'Are you sure you want to delete the topic {name}?',
            'ä½ ç¡®å®šè¦é€€å‡ºè¯é¢˜ {name} å—ï¼Ÿ': 'Are you sure you want to exit the topic {name}?',
        }
    };
    return moreLang[lang] || { __empty: true }
}

function i18n(txt, firstToUpperCase = false) {
    let re = TextMap[txt] || txt;
    if (!TextMap.__empty && typeof TextMap[txt] != 'string') {
        if (TextMap.__notFound[txt]) {
            TextMap.__notFound[txt]++;
        } else {
            TextMap.__notFound[txt] = 1;
        }
    }
    return firstToUpperCase ? re.charAt(0).toUpperCase() + re.slice(1) : re;
}